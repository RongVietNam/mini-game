<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√¨nh chi·∫øu ƒêa ph∆∞∆°ng ti·ªán</title>
    <link rel="stylesheet" href="styles.css">
    <!-- SortableJS for drag and drop (Sidebar only) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar: Step List -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Danh s√°ch Step</h2>
                <button id="add-step-btn" class="btn-primary">+ Th√™m Step</button>
            </div>
            <div id="step-list" class="step-list">
                <!-- Steps will be injected here -->
            </div>
            <div class="sidebar-footer">
                <button id="manage-resources-btn" class="btn-dashed" style="margin-bottom: 0.5rem;">üìÅ Qu·∫£n l√Ω T√†i nguy√™n</button>
                <div class="data-actions">
                    <button id="export-btn" class="btn-secondary btn-sm">‚¨á Export JSON</button>
                    <button id="import-btn" class="btn-secondary btn-sm">‚¨Ü Import JSON</button>
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                </div>
                <button id="present-btn" class="btn-success">‚ñ∂ Tr√¨nh chi·∫øu</button>
                <button id="back-home-btn" class="btn-secondary">üè† V·ªÅ trang ch·ªß</button>
            </div>
        </aside>

        <!-- Main Content: Step Editor -->
        <main class="editor-area" id="editor-area">
            <div class="editor-header">
                <div class="step-title-edit">
                    <label>T√™n Step:</label>
                    <input type="text" id="step-name-input" placeholder="Nh·∫≠p t√™n step...">
                </div>
                <div class="step-audio-config">
                    <label>√Çm thanh n·ªÅn:</label>
                    <span id="step-audio-name" class="resource-name">Ch∆∞a c√≥</span>
                    <button id="select-step-audio-btn" class="btn-secondary btn-sm">Ch·ªçn</button>
                    <button id="remove-audio-btn" class="btn-icon hidden" title="X√≥a audio">‚úï</button>
                    <audio id="audio-preview" controls style="display: none; height: 30px; margin-left: 5px;"></audio>
                </div>
                <div class="step-actions">
                    <button id="copy-step-btn" class="btn-secondary" title="Nh√¢n b·∫£n Step n√†y">Copy</button>
                    <button id="delete-step-btn" class="btn-danger" title="X√≥a Step n√†y">X√≥a</button>
                </div>
            </div>

            <div class="frames-wrapper">
                <div id="frames-canvas" class="frames-canvas">
                    <!-- Frames will be injected here as absolute positioned elements -->
                </div>

                <div class="canvas-toolbar">
                    <button id="add-frame-btn" class="btn-primary">+ Th√™m khung h√¨nh</button>
                    <button id="fullscreen-frame-btn" class="btn-secondary">Th√™m khung To√†n m√†n h√¨nh</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: Resource Manager -->
    <div id="resource-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Qu·∫£n l√Ω T√†i nguy√™n</h3>
                <button class="close-modal-btn">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="resource-toolbar">
                    <input type="file" id="add-resource-input" multiple style="display: none;">
                    <button id="add-resource-btn" class="btn-primary">Upload File M·ªõi</button>
                    <p class="hint">H·ªó tr·ª£: ·∫¢nh, Video, MP3</p>
                </div>
                <div id="resource-list" class="resource-list">
                    <!-- Resource items -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="close-modal-btn btn-secondary">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal: Resource Selector (Picker) -->
    <div id="resource-picker-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ch·ªçn T√†i nguy√™n</h3>
                <button class="close-picker-btn">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="picker-list" class="resource-list">
                    <!-- Items to pick -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Import Missing Resources -->
    <div id="import-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Kh√¥i ph·ª•c T√†i nguy√™n</h3>
                <p>Vui l√≤ng upload l·∫°i c√°c file t∆∞∆°ng ·ª©ng ƒë·ªÉ kh√¥i ph·ª•c d·ªØ li·ªáu.</p>
            </div>
            <div class="modal-body">
                <div class="import-toolbar" style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
                    <button id="auto-match-btn" class="btn-primary" style="width: 100%;">üìÇ Ch·ªçn nhi·ªÅu file ƒë·ªÉ t·ª± ƒë·ªông kh·ªõp</button>
                    <input type="file" id="auto-match-input" multiple style="display: none;">
                    <p class="hint" style="margin-top: 5px; font-size: 0.85rem;">Ch·ªçn t·∫•t c·∫£ ·∫£nh/video/nh·∫°c c√πng l√∫c. H·ªá th·ªëng s·∫Ω t·ª± ƒëi·ªÅn n·∫øu tr√πng t√™n file.</p>
                </div>
                <div id="missing-resource-list" class="missing-list">
                    <!-- Missing items -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="finish-import-btn" class="btn-success">Ho√†n t·∫•t</button>
            </div>
        </div>
    </div>

    <!-- Template for a Frame Card -->
    <template id="frame-template">
        <div class="frame-card">
            <div class="frame-header">
                <span class="frame-title">Khung #</span>
                <div class="z-controls">
                    <button class="z-btn z-up" title="L√™n 1 l·ªõp">‚ñ≤</button>
                    <button class="z-btn z-down" title="Xu·ªëng 1 l·ªõp">‚ñº</button>
                    <button class="z-btn z-top" title="L√™n tr√™n c√πng">‚á™</button>
                    <button class="z-btn z-bottom" title="Xu·ªëng d∆∞·ªõi c√πng">‚á©</button>
                </div>
                <button class="frame-delete-btn btn-icon">‚úï</button>
            </div>
            <div class="frame-content">
                <div class="upload-placeholder">
                    <span>Ch·ªçn t·ª´ Th∆∞ vi·ªán</span>
                    <button class="btn-secondary btn-sm select-resource-btn">Ch·ªçn File</button>
                </div>
                <div class="media-preview hidden">
                    <!-- img or video element -->
                </div>
            </div>
            <div class="frame-settings">
                <label class="checkbox-label">
                    <input type="checkbox" class="frame-loop-checkbox"> Loop
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" class="frame-autoplay-checkbox" checked> Auto
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" class="frame-cover-checkbox"> Fill
                </label>
            </div>
            <div class="resize-handle"></div>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>
